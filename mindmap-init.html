<script type="module">
  import mindmap from "https://cdn.jsdelivr.net/npm/@mermaid-js/mermaid-mindmap@9/dist/mermaid-mindmap.esm.min.mjs";
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.esm.min.mjs";
  mermaid.registerExternalDiagrams([mindmap]).then(() => {
    let checkTimes = 0;
    const timer = setInterval(() => {
      const root = document.querySelector("#__docusaurus");
      const rendered = !!root.innerHTML;
      if (rendered || checkTimes > 1000) {
        clearInterval(timer);
      }

      if (rendered) {
        const theme =
          document.documentElement.getAttribute("data-theme") || "light";
        const maps = document.querySelectorAll(
          'div.mindmap[data-processed="true"]'
        );
        maps.forEach((v) => {
          v.removeAttribute("data-processed");
          v.innerHTML = v.getAttribute("data-mindmap-src");
        });
        mermaid.init(undefined, maps);
      }
    }, 1000);
  });
</script>
